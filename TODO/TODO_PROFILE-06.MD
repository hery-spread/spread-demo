# PLAN D'ACTION PRESCRIPTIF : PROFILE-06 ‚Äî Refonte compl√®te des rapports d'influence avec tous les champs Modash API

## User Story
En tant qu'utilisateur, je veux des rapports d'influence ultra-complets qui exploitent tous les champs disponibles dans l'API Modash (Instagram, YouTube, TikTok), organis√©s dans une interface moderne et professionnelle, afin d'avoir une vision exhaustive des performances et de l'audience de chaque influenceur.

---

## Contexte & d√©pendances
- Pages existantes : `src/app/profile/[id]/page.tsx`, `src/app/share/[shareId]/page.tsx`
- Composants actuels : `src/components/profile/*` (ProfileHeader, ProfileTabs, charts, etc.)
- Types actuels : `src/types/index.ts` (√† enrichir massivement)
- Mock data : `src/lib/mockData.ts` (√† remplacer par vrais appels Modash)
- Partage existant : pattern de partage d√©j√† en place

---

## Objectifs
1. **Mapper tous les champs Modash** dans nos interfaces de rapport d'influence
2. **Cr√©er des rapports sp√©cialis√©s par plateforme** (Instagram, YouTube, TikTok)
3. **Enrichir massivement les donn√©es affich√©es** : audience, performance, collaborations, historique
4. **Moderniser l'interface** avec des visualisations avanc√©es et une navigation intuitive
5. **Maintenir la compatibilit√©** avec le syst√®me de partage existant

---

## üìä Analyse des champs Modash par plateforme

### üì± **Instagram Report Fields**
```typescript
profile: {
  // Profil de base
  userId, username, fullname, url, picture, bio, isPrivate, accountType, isVerified,
  
  // M√©triques principales
  followers, following, postsCount, avgLikes, avgComments, avgViews, avgReelsPlays,
  
  // G√©olocalisation & d√©mographie
  city, state, country, gender, ageGroup, language,
  
  // Contenu & engagement
  hashtags[], mentions[], statsByContentType, recentPosts[], popularPosts[],
  
  // Audience d√©taill√©e (16 propri√©t√©s)
  audience: { genders, ages, locations, languages, interests, credibility, etc. },
  
  // Collaborations & mon√©tisation
  sponsoredPosts[], brandAffinity[], paidPostPerformance, 
  sponsoredPostsMedianViews, nonSponsoredPostsMedianViews,
  
  // Historique & √©volution
  statHistory[], lookalikes[], contacts[], interests[]
}
```

### üé¨ **YouTube Report Fields**
```typescript
profile: {
  // Profil de base
  userId, username, fullname, url, picture, description, isVerified, handle,
  
  // M√©triques principales
  followers, postsCount, avgLikes, avgComments, totalViews,
  
  // G√©olocalisation & d√©mographie
  city, state, country, gender, ageGroup,
  
  // Contenu par type
  statsByContentType: { videos, shorts, etc. },
  recentPosts[], popularPosts[],
  
  // Audience sp√©cialis√©e YouTube
  audienceCommenters: { genders, geoCountries, ages, languages, notableUsers, audienceLookalikes },
  
  // Collaborations & mon√©tisation
  sponsoredPosts[], paidPostPerformance, sponsoredPostsMedianViews,
  
  // Recommandations & similarit√©
  lookalikesByTopics[], interests[], contacts[]
}
```

### üéµ **TikTok Report Fields**
```typescript
profile: {
  // Profil de base
  userId, username, fullname, url, picture, bio, isPrivate, isVerified, secUid,
  
  // M√©triques principales
  followers, following, postsCount, avgLikes, totalLikes, avgComments,
  
  // G√©olocalisation & d√©mographie
  city, state, country, gender, ageGroup,
  
  // Contenu & engagement
  statsByContentType, recentPosts[], popularPosts[],
  
  // Audience (9 propri√©t√©s)
  audience: { genders, ages, locations, languages, interests, etc. },
  
  // Collaborations & mon√©tisation
  sponsoredPosts[], paidPostPerformance, sponsoredPostsMedianViews,
  
  // Recommandations
  lookalikes[], interests[], contacts[]
}
```

---

## Plan d'Action Prescriptif

### √âtape 1 ‚Äî Extension massive des types TypeScript
- [ ] **Cr√©er `src/types/modashReports.ts`** avec interfaces compl√®tes :
  - [ ] `InstagramReportProfile` : tous les champs Instagram
  - [ ] `YouTubeReportProfile` : tous les champs YouTube  
  - [ ] `TikTokReportProfile` : tous les champs TikTok
  - [ ] `UnifiedInfluencerReport` : interface commune + sp√©cificit√©s par plateforme
  - [ ] Types pour audience d√©taill√©e, collaborations, historique, lookalikes
- [ ] **Enrichir `src/types/index.ts`** avec les nouveaux types unifi√©s
- [ ] **Types pour visualisations** : graphiques, m√©triques, comparaisons

### √âtape 2 ‚Äî Fa√ßade data Modash (remplacement mock)
- [ ] **Cr√©er `src/lib/modash/reports.ts`** :
  - [ ] `getInstagramReport(userId, calculationMethod?)` 
  - [ ] `getYouTubeReport(userId, calculationMethod?)`
  - [ ] `getTikTokReport(userId, calculationMethod?)`
  - [ ] `getUnifiedReport(platform, userId)` : interface commune
  - [ ] `getPerformanceData(platform, url)` : donn√©es de performance avanc√©es
- [ ] **Cache intelligent** : √©viter les appels r√©p√©t√©s (1 cr√©dit par rapport)
- [ ] **Gestion d'erreurs** : retry logic, fallback sur mock si API indisponible

### √âtape 3 ‚Äî Refonte compl√®te ProfileHeader
- [ ] **Refactor `src/components/profile/ProfileHeader.tsx`** :
  - [ ] **Section principale** : photo, nom, handle, badges (v√©rifi√©, priv√©, type de compte)
  - [ ] **M√©triques cl√©s** : followers, engagement rate, posts count
  - [ ] **G√©olocalisation** : ville, √©tat, pays avec drapeaux
  - [ ] **Contacts** : email, t√©l√©phone (si disponibles)
  - [ ] **Liens sociaux** : autres plateformes d√©tect√©es
  - [ ] **Actions** : partager rapport, exporter, ajouter √† liste

### √âtape 4 ‚Äî Syst√®me d'onglets enrichi
- [ ] **Refactor `src/components/profile/ProfileTabs.tsx`** avec nouveaux onglets :
  - [ ] **"Vue d'ensemble"** : KPIs principaux, graphiques de tendance
  - [ ] **"Audience"** : d√©mographie d√©taill√©e, g√©olocalisation, int√©r√™ts
  - [ ] **"Contenu"** : posts r√©cents/populaires, hashtags, mentions
  - [ ] **"Performance"** : m√©triques par type de contenu, √©volution temporelle
  - [ ] **"Collaborations"** : posts sponsoris√©s, marques partenaires
  - [ ] **"Similaires"** : lookalikes, recommandations, audience overlap

### √âtape 5 ‚Äî Composants de visualisation avanc√©s
- [ ] **Cr√©er `src/components/profile/charts/AudienceBreakdown.tsx`** :
  - [ ] **Graphiques d√©mographiques** : √¢ge, genre, localisation
  - [ ] **Langues parl√©es** : r√©partition avec pourcentages
  - [ ] **Int√©r√™ts** : nuage de mots, barres horizontales
  - [ ] **Cr√©dibilit√© audience** (Instagram) : indicateur visuel
- [ ] **Cr√©er `src/components/profile/charts/ContentAnalysis.tsx`** :
  - [ ] **Performance par type** : posts vs reels vs videos vs shorts
  - [ ] **Hashtags populaires** : fr√©quence, performance
  - [ ] **Mentions r√©currentes** : r√©seau d'influence
  - [ ] **Horaires de publication** : heatmap jour/heure
- [ ] **Cr√©er `src/components/profile/charts/CollaborationInsights.tsx`** :
  - [ ] **Marques partenaires** : historique, fr√©quence
  - [ ] **Performance posts sponsoris√©s** vs organiques
  - [ ] **√âvolution mon√©tisation** : tendances CPM, engagement pay√©

### √âtape 6 ‚Äî Composants sp√©cialis√©s par plateforme
- [ ] **Cr√©er `src/components/profile/platform/InstagramSpecific.tsx`** :
  - [ ] **Reels analytics** : vues moyennes, top performers
  - [ ] **Stories insights** (si disponible via API)
  - [ ] **Shopping tags** : produits mis en avant
  - [ ] **Brand affinity** : affinit√© avec les marques
- [ ] **Cr√©er `src/components/profile/platform/YouTubeSpecific.tsx`** :
  - [ ] **Videos vs Shorts** : performance comparative
  - [ ] **Audience commentaires** : profil des viewers actifs
  - [ ] **Collaborations d√©tect√©es** : autres YouTubeurs
  - [ ] **Mon√©tisation** : revenus estim√©s, CPM
- [ ] **Cr√©er `src/components/profile/platform/TikTokSpecific.tsx`** :
  - [ ] **Viral content** : posts avec le plus de vues
  - [ ] **Trends participation** : hashtags tendance utilis√©s
  - [ ] **Duets & Stitches** : contenu collaboratif
  - [ ] **Music usage** : sons populaires utilis√©s

### √âtape 7 ‚Äî Historique et √©volution temporelle
- [ ] **Cr√©er `src/components/profile/timeline/GrowthTimeline.tsx`** :
  - [ ] **√âvolution followers** : graphique temporel avec √©v√©nements marquants
  - [ ] **Performance content** : likes, comments, vues dans le temps
  - [ ] **Engagement rate** : tendances et variations saisonni√®res
  - [ ] **Comparaison p√©riodes** : croissance mensuelle, trimestrielle
- [ ] **D√©tection d'√©v√©nements** : pics de croissance, collaborations marquantes

### √âtape 8 ‚Äî Syst√®me de recommandations et lookalikes
- [ ] **Cr√©er `src/components/profile/recommendations/SimilarInfluencers.tsx`** :
  - [ ] **Lookalikes par audience** : influenceurs avec audience similaire
  - [ ] **Lookalikes par contenu** : style et th√©matiques proches
  - [ ] **Audience overlap** : calcul de chevauchement d'audience
  - [ ] **Recommandations collaborations** : suggestions de partenariats

### √âtape 9 ‚Äî Export et partage avanc√©s
- [ ] **Enrichir le syst√®me de partage existant** :
  - [ ] **Rapports PDF** : mise en page professionnelle avec tous les insights
  - [ ] **Exports Excel** : donn√©es brutes pour analyse approfondie
  - [ ] **Liens partageables** : versions publiques avec branding Spread
  - [ ] **Rapports personnalis√©s** : s√©lection des sections √† inclure

### √âtape 10 ‚Äî Performance et optimisation
- [ ] **Lazy loading** : chargement progressif des sections lourdes
- [ ] **Virtualisation** : listes de posts, collaborations si > 100 items
- [ ] **Cache strat√©gique** : mise en cache des rapports co√ªteux (1 cr√©dit)
- [ ] **Skeleton loading** : √©tats de chargement √©l√©gants
- [ ] **Error boundaries** : gestion gracieuse des erreurs API

---

## Crit√®res d'acceptation
- [ ] **Tous les champs Modash** sont int√©gr√©s et affich√©s de mani√®re pertinente
- [ ] **Interface adaptative** : s'adapte automatiquement √† la plateforme (Instagram/YouTube/TikTok)
- [ ] **Visualisations riches** : graphiques, m√©triques, insights visuels
- [ ] **Performance optimale** : chargement < 3s, interactions fluides
- [ ] **Partage fonctionnel** : liens publics, exports PDF/Excel
- [ ] **Responsive design** : parfait sur desktop, tablet, mobile
- [ ] **Accessibilit√©** : navigation clavier, screen readers, contrastes
- [ ] **Build/Lint** : `npm run build` et `npm run lint` passent sans erreur

---

## Risques & notes
- **Co√ªt API** : 1 cr√©dit par rapport ‚Üí cache intelligent obligatoire
- **Donn√©es manquantes** : certains champs peuvent √™tre null ‚Üí fallbacks √©l√©gants
- **Performance** : rapports tr√®s riches ‚Üí lazy loading et optimisation
- **Maintenance** : √©volution API Modash ‚Üí architecture extensible

---

## üé® Sp√©cifications UX/UI

### Design System
- **Palette coh√©rente** : violet/purple theme existant
- **Typographie** : hi√©rarchie claire, lisibilit√© optimale
- **Iconographie** : Heroicons + ic√¥nes sp√©cialis√©es plateformes
- **Animations** : transitions fluides, micro-interactions

### Layout Responsive
- **Desktop** : sidebar navigation, colonnes multiples
- **Tablet** : navigation tabs, colonnes adaptatives  
- **Mobile** : navigation bottom, single column, swipe gestures

### Visualisations
- **Graphiques** : Chart.js ou D3.js pour interactivit√©
- **M√©triques** : cards avec √©volution, indicateurs color√©s
- **Comparaisons** : tableaux, barres de progression
- **G√©olocalisation** : cartes interactives si pertinent

---

## üöÄ Strat√©gie de d√©ploiement
1. **Phase 1** : Types + fa√ßade API + ProfileHeader enrichi
2. **Phase 2** : Onglets de base + visualisations audience/contenu
3. **Phase 3** : Composants sp√©cialis√©s par plateforme + collaborations
4. **Phase 4** : Historique + recommandations + exports avanc√©s
5. **Phase 5** : Optimisations performance + polish UX

---

## üìã Champs Modash par section (r√©f√©rence)

### üéØ **Section Vue d'ensemble**
- M√©triques principales : followers, engagement rate, posts count
- √âvolution r√©cente : croissance followers, performance moyenne
- Score influence : calcul composite bas√© sur audience + engagement

### üë• **Section Audience** 
- **D√©mographie** : √¢ge, genre, localisation g√©ographique
- **Langues** : r√©partition des langues parl√©es par l'audience
- **Int√©r√™ts** : centres d'int√©r√™t de l'audience (Instagram uniquement)
- **Cr√©dibilit√©** : score de qualit√© de l'audience (Instagram)

### üìÑ **Section Contenu**
- **Posts r√©cents** : derni√®res publications avec m√©triques
- **Posts populaires** : meilleures performances historiques
- **Hashtags** : plus utilis√©s avec poids et performance
- **Mentions** : comptes mentionn√©s fr√©quemment

### üìä **Section Performance**
- **Par type de contenu** : posts vs reels vs videos vs shorts
- **M√©triques temporelles** : √©volution likes, comments, vues
- **Engagement rate** : calculs par p√©riode et type de contenu
- **Posting patterns** : fr√©quence, jours pr√©f√©r√©s, heures optimales

### ü§ù **Section Collaborations**
- **Posts sponsoris√©s** : historique des partenariats d√©tect√©s
- **Marques partenaires** : fr√©quence de collaboration
- **Performance pay√©e** : comparaison posts sponsoris√©s vs organiques
- **Mon√©tisation** : estimations revenus, CPM, valeur par post

### üîç **Section Similaires**
- **Lookalikes** : influenceurs avec audience/contenu similaire
- **Audience overlap** : chevauchement d'audience avec autres cr√©ateurs
- **Recommandations** : suggestions de collaborations potentielles
- **Network analysis** : position dans l'√©cosyst√®me d'influence
