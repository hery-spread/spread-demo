---
description: 
globs: 
alwaysApply: true
---
>
> Votre Mission :
> Impl√©menter, s√©quentiellement et dans l'ordre des priorit√©s, chaque User Story d√©finie dans le fichier user_stories.csv. Pour chaque User Story, vous devez localiser le blueprint correspondant (TODO_{ID}.md) et suivre son "Plan d'Action Prescriptif" √† la lettre.
>
> ---
>
> ### Les Lois Fondamentales de l'Ex√©cution (Vos Directives Imp√©ratives)
>
> #### Loi n¬∞1 : Le Blueprint est la V√©rit√© Absolue.
> - Vous devez ex√©cuter le plan tel qu'il est √©crit dans le fichier TODO.
> - Ne d√©viez jamais du plan. N'ajoutez, ne modifiez, et ne supprimez aucune logique non sp√©cifi√©e. L'architecture a d√©j√† √©t√© valid√©e. Votre r√¥le est l'ex√©cution parfaite, pas l'interpr√©tation cr√©ative.
> - Utilisez les commandes bash, les contenus de fichiers et les noms de packages/fonctions exacts fournis dans les blueprints.
>
> #### Loi n¬∞2 : Le Build ne Doit Jamais Casser.
> - C'est la directive la plus importante. Votre travail n'est consid√©r√© comme termin√© que si le projet est dans un √©tat stable.
> - Apr√®s chaque √©tape significative d'un TODO (cr√©ation d'un fichier, modification d'une d√©pendance, ajout d'une fonction), vous devez imp√©rativement lancer les deux commandes de v√©rification √† la racine du projet :
> 1. npm run lint
> 2. npm run build
> - Vous ne pouvez pas passer √† l'√©tape suivante tant que ces deux commandes ne s'ex√©cutent pas sans erreur.
>
> #### Loi n¬∞3 : Le D√©bogage est votre Devoir.
> - Si une commande (lint, build, ou autre) √©choue, vous ne devez pas vous arr√™ter.
> - Activez votre mode "Machine de Guerre" :
> 1. Analysez l'erreur : Lisez attentivement le message d'erreur pour en comprendre la cause racine.
> 2. Tentez une correction : Appliquez une correction logique bas√©e sur l'erreur. Par exemple, si une d√©pendance est manquante, installez-la. Si une variable de type est incorrecte, corrigez-la en vous basant sur les types export√©s par @brokerweb/db.
> 3. Consultez des sources externes : Si l'erreur est complexe, utilisez votre outil de recherche web (web_search) pour trouver des solutions √† des probl√®mes similaires sur des forums comme Stack Overflow ou dans la documentation des outils (Next.js, Supabase, etc.).
> 4. Ne persistez pas au-del√† de 3 tentatives. Si vous √©chouez √† corriger une erreur apr√®s trois tentatives, stoppez, signalez l'√©chec et la nature de l'erreur, puis attendez de nouvelles instructions.
>
> #### Loi n¬∞4 : Le Suivi est Continu et Pr√©cis.
> - Le fichier user_stories.csv est votre tableau de bord.
> - Apr√®s chaque √©tape valid√©e d'un "Plan d'Action Prescriptif" dans un fichier TODO, vous devez imm√©diatement √©diter le fichier user_stories.csv.
> - Calculez le nouvel avancement : (nombre d'√©tapes termin√©es / nombre total d'√©tapes) * 100. Arrondissez √† l'entier le plus proche.
> - Mettez √† jour la valeur dans la colonne Avancement (%) pour la ligne correspondant √† l'ID de la User Story en cours.
>
> ---
>
> ### Votre Workflow d'Op√©ration (La Boucle d'Ex√©cution)
>
> Pour chaque User Story, suivez ce cycle rigoureux :
>
> 1. Identifier la Cible : Lisez le fichier user_stories.csv pour identifier la prochaine t√¢che non compl√©t√©e (avancement < 100%) en accord avec le fichier /TODO/ORDER.MD
> 2. Annoncer la Mission : D√©clarez clairement la t√¢che que vous commencez. (Ex: "D√©but de l'ex√©cution de INFRA-01...").
> 3. Lire le Blueprint : Lisez le contenu complet du fichier TODO/TODO_{ID}.md correspondant.
> 4. Ex√©cuter le Plan, √âtape par √âtape :
> a. Ex√©cutez la premi√®re √©tape du "Plan d'Action Prescriptif". En cas de conception de nouveaux composants, se baser sur /DESIGN/ pour le designsystem
> b. V√©rifiez (npm run lint & npm run build). Si erreur, entrez en mode d√©bogage.
> c. Rapportez : Mettez √† jour l'avancement dans user_stories.csv.
> d. R√©p√©tez pour chaque √©tape du plan.
> 5. Finaliser et Rapporter : Une fois la derni√®re √©tape termin√©e et l'avancement √† 100%, d√©clarez la fin de la t√¢che. (Ex: "T√¢che INFRA-01 termin√©e. Avancement : 100%").
> 6. Recommencer : Passez √† la t√¢che suivante.
>
> ---


## üóÑÔ∏è HI√âRARCHIE & EXTENSION DES TYPES

1. **database-generated.ts** ‚Äî Types Supabase g√©n√©r√©s automatiquement (SOURCE DE V√âRIT√â ABSOLUE).
2. **views.ts** ‚Äî Types composites m√©tier.
   *üîπ Si un type natif de la DB ne couvre pas le besoin, cr√©e ici un **type composite** en **associant plusieurs types natifs** ‚Äî jamais de type custom hors DB.*
3. **forms.ts** ‚Äî Types formulaires bas√©s sur `TablesInsert` / `TablesUpdate`.

> **Interdit** : `any`, `unknown`, ou types custom en dehors de cette hi√©rarchie.


## üß® PI√àGES INTERDITS

* Ne JAMAIS modifier `database-generated.ts`.
* Ne JAMAIS ajouter de `any` non justifi√©.
* Ne JAMAIS cr√©er de types custom hors architecture.
* Ne JAMAIS automatiser tes t√¢ches ‚Äì **tu es une main de robot, pas un script**.


## ‚ö° COMMANDES ESSENTIELLES

```bash
npm run build        # Compilation
npm run lint         # Analyse statique
supabase migration new create_employees_table # Pour cr√©er une nouvelle migration
supabase db push # Pour mettre en ligne une migration
npx supabase gen types typescript --project-id tjxkquzguhbbqyoumdom --schema public > lib/types/database-generated.ts

```


>
